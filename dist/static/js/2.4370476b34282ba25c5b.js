webpackJsonp([2],{ITM4:function(t,e){},bH1b:function(t,e,n){"use strict";e.b=function(t){return Object(a.a)({url:"/user/?name="+t,method:"get"})},e.a=function(t){return Object(a.a)({url:"/user",method:"post",data:t})},e.c=function(){return Object(a.a)({url:"/userList",method:"get"})};var a=n("syOD")},gI6u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("bH1b"),s=n("msYM"),i={methods:{check:function(){var t=this;Object(s.f)(this.checkList).then(function(e){t.giveList=e;var n={name:t.name,num:1,time:t.giveList[0].time,type:t.giveList[0].type,value:t.giveList[0].value,status:t.status};Object(s.b)(n).then(function(e){t.dialogFormVisible=!1,t.$message({message:"赠送成功，宝",type:"success"});var n={num:t.giveList[0].num-1};Object(s.g)(t.giveList[0].id,n),t.getdata()},function(t){console.log("error")})},function(t){console.log("error")})},getdata:function(){var t=this;Object(a.c)().then(function(e){t.tableData=e},function(t){console.log("error")})},handleGive:function(t,e){this.dialogFormVisible=!0,this.name=e.name,this.getcoupons()},handleClick:function(t,e){var n=this;Object(s.e)(this.name,this.activeName).then(function(t){n.usercouponsList=t},function(t){console.log("error")})},mycoupons:function(t,e){var n=this;this.name=e.name,this.dialogFormVisible2=!0,Object(s.e)(this.name,this.activeName).then(function(t){n.usercouponsList=t},function(t){console.log("error")})},getcoupons:function(){var t=this;Object(s.d)().then(function(e){t.couponsList=e},function(t){console.log("error")})},handleDelete:function(t,e){},getSummaries:function(t){var e=t.columns,n=t.data,a=[];return e.forEach(function(t,e){if(0!==e){var s=n.map(function(e){return Number(e[t.property])});"spend"!=t.property&&"nowsale"!=t.property||(a[e]=s.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0),a[e])}else a[e]="合计"}),a}},mounted:function(){this.getdata()},data:function(){return{type:"已使用",activeName:"未使用",usercouponsList:[],giveList:[],tableData:[],couponsList:[],money:1e4,checkList:[],dialogFormVisible:!1,dialogFormVisible2:!1,name:"",status:"未使用"}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.spend,"show-summary":"","summary-method":t.getSummaries}},[n("el-table-column",{attrs:{label:"购买时间",width:"110",prop:"time"}}),t._v(" "),n("el-table-column",{attrs:{label:"购买者",width:"130",prop:"user"}}),t._v(" "),n("el-table-column",{attrs:{label:"购买货物",align:"center",width:"460",prop:"type"}}),t._v(" "),n("el-table-column",{attrs:{label:"货物原价",align:"center",width:"130",prop:"spend"}}),t._v(" "),n("el-table-column",{attrs:{label:"购买优惠",align:"center",width:"200",prop:"youhuiquan"}}),t._v(" "),n("el-table-column",{attrs:{label:"实际交易金额(元)",align:"center",width:"140",prop:"nowsale"}})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"用户 ID",prop:"id",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{label:"开号时间",prop:"time"}}),t._v(" "),n("el-table-column",{attrs:{label:"账号用户名",width:"120",prop:"name"}}),t._v(" "),n("el-table-column",{attrs:{label:"用户头像",width:"160",prop:"src"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{src:t.row.src,width:"100",height:"100"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"email",width:"180",prop:"email"}}),t._v(" "),n("el-table-column",{attrs:{label:"电话号码",prop:"tel"}}),t._v(" "),n("el-table-column",{attrs:{label:"会员状态",prop:"member",fit:"true"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleGive(e.$index,e.row)}}},[t._v("赠送")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return t.mycoupons(e.$index,e.row)}}},[t._v("优惠券")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"赠送优惠券给:"+t.name,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.couponsList,function(e,a){return n("el-card",{key:a,staticStyle:{"margin-top":"15px"}},[n("el-checkbox",{attrs:{label:e.type}},[n("el-descriptions",{attrs:{title:"用户信息"}},[n("el-descriptions-item",{attrs:{label:"用户名"}},[t._v("可使用价值为："),n("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.value))])],1),t._v("   \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"手机号"}},[t._v("剩余数量为："),n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.num))])],1),t._v("   \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"居住地"}},[t._v("截止时间为："),n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.time))])],1),t._v("      \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"备注"}},[t._v("\n\t\t\t\t\t\t\t使用类型为："),n("el-tag",{attrs:{size:"small"}},[t._v(t._s(e.type))])],1)],1)],1)],1)}),1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{on:{click:t.check}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.name+"的优惠券",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"未使用",name:"未使用"}},t._l(t.usercouponsList,function(e,a){return n("el-card",{key:a,staticStyle:{"margin-top":"15px"}},[n("el-descriptions",{attrs:{title:"用户信息"}},[n("el-descriptions-item",{attrs:{label:"用户名"}},[t._v("可使用价值为："),n("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.value))])],1),t._v("   \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"手机号"}},[t._v("剩余数量为："),n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.num))])],1),t._v("   \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"居住地"}},[t._v("截止时间为："),n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.time))])],1),t._v("      \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"备注"}},[t._v("\n\t\t\t\t\t\t\t使用类型为："),n("el-tag",{attrs:{size:"small"}},[t._v(t._s(e.type))])],1)],1)],1)}),1),t._v(" "),n("el-tab-pane",{attrs:{label:"已使用",name:"已使用"}},t._l(t.usercouponsList,function(e,a){return n("el-card",{key:a,staticStyle:{"margin-top":"15px"}},[n("el-badge",{staticClass:"item",attrs:{value:"已使用",type:"info"}},[n("el-descriptions",{attrs:{title:"用户信息"}},[n("el-descriptions-item",{attrs:{label:"用户名"}},[t._v("可使用价值为："),n("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.value))])],1),t._v("   \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"手机号"}},[t._v("剩余数量为："),n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.num-1))])],1),t._v("   \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"居住地"}},[t._v("截止时间为："),n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.time))])],1),t._v("      \n\t\t\t\t\t\t"),n("el-descriptions-item",{attrs:{label:"备注"}},[t._v("\n\t\t\t\t\t\t\t使用类型为："),n("el-tag",{attrs:{size:"small"}},[t._v(t._s(e.type))])],1)],1)],1)],1)}),1)],1)],1)],1)},staticRenderFns:[]};var o=n("VU/8")(i,l,!1,function(t){n("ITM4")},null,null);e.default=o.exports},msYM:function(t,e,n){"use strict";e.d=function(){return Object(a.a)({url:"/couponsList",method:"get"})},e.f=function(t){return Object(a.a)({url:"/couponsList/?type="+t,method:"get"})},e.e=function(t,e){return Object(a.a)({url:"/usercouponsList/?name="+t+"&status="+e,method:"get"})},e.a=function(t){return Object(a.a)({url:"/couponsList",method:"post_noqs",data:t})},e.h=function(t,e){return Object(a.a)({url:"/couponsList/"+t,method:"put",data:e})},e.c=function(t){return Object(a.a)({url:"/couponsList/"+t,method:"delete"})},e.g=function(t,e){return Object(a.a)({url:"/couponsList/"+t,method:"patch",data:e})},e.b=function(t){return Object(a.a)({url:"/usercouponsList",method:"post_noqs",data:t})};var a=n("syOD")}});
//# sourceMappingURL=2.4370476b34282ba25c5b.js.map